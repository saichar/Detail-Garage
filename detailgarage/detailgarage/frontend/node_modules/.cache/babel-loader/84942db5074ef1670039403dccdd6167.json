{"ast":null,"code":"var _jsxFileName = \"/var/www/html/htdoc/detailgarage/frontend/src/components/user/order_item.js\";\nimport React, { Component } from 'react';\nimport { Environment } from '../../../src/components/environment';\nimport axios from 'axios';\nimport { If, Then, Else, Switch, Case } from 'react-if';\nimport Header from '../../../src/layouts/header';\nimport Alert from 'react-s-alert';\nimport Footer from '../../../src/layouts/footer';\nimport UserLeftMenu from '../../../src/layouts/user_left_menu'; // import UserReview from '../../components/user/user_review';\n\nvar dateFormat = require('dateformat');\n\nclass OrderItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user_id_send: '',\n      orderItemList: [],\n      orderId: '',\n      rating: 0,\n      reviewedit: \"\" // reviewlist:[],\n      // itemlist:[],\n\n    };\n    const orderId = this.props.postdata;\n    var user_id_send = localStorage.getItem(\"user_id\") ? localStorage.getItem(\"user_id\") : \"\";\n    this.addRating = this.addRating.bind(this);\n    this.GetDetails = this.GetDetails.bind(this);\n    axios.post(Environment.apiurl + '/getUserOrderItemList', {\n      orderId: orderId,\n      user_id: user_id_send\n    }).then(result => {\n      if (result) {\n        this.setState({\n          user_id_send: user_id_send\n        });\n        this.setState({\n          orderItemList: result.data.response\n        }); // this.setState({reviewlist: result.data.response.reviewlist});\n      }\n    });\n  }\n\n  GetDetails(param, param1) {\n    this.setState({\n      reviewedit: \"\"\n    });\n    var user_id_send = localStorage.getItem(\"user_id\") ? localStorage.getItem(\"user_id\") : \"\";\n\n    if (param != undefined && param1 != undefined) {\n      axios.post(Environment.apiurl + '/getReviewdetailByid', {\n        productid: param1,\n        user_id: user_id_send\n      }).then(result => {\n        console.log(result.data);\n\n        if (result) {\n          var resuldata = result.data.response;\n\n          if (resuldata.length > 0) {\n            var rating = resuldata[0].rating;\n            document.getElementById(\"star\" + rating + \"_\" + param).checked = true;\n            document.getElementById('review' + param).value = resuldata[0].review;\n            this.setState({\n              reviewedit: resuldata[0].id\n            });\n          }\n        }\n      });\n    }\n  }\n\n  addRating(param, param1) {\n    alert(param);\n    alert(param1);\n    this.setState({\n      rating: param1\n    });\n  }\n\n  submitReview(param, param1) {\n    //var prorating = document.querySelector('input[name = rating'+param+']:checked').value;\n    //alert(prorating);\n    var prorating = 0;\n    var proratingObj = document.querySelector('input[name = rating' + param + ']:checked');\n\n    if (proratingObj) {\n      prorating = proratingObj.value;\n    }\n\n    var proReview = document.getElementById('review' + param).value;\n    var proId = param1;\n    var reviewDetails = {\n      \"reviewedit\": this.state.reviewedit,\n      \"rating\": prorating,\n      \"review\": proReview,\n      \"product_id\": proId,\n      \"user_id\": this.state.user_id_send\n    };\n    axios.post(Environment.apiurl + \"/addProductReview\", reviewDetails).then(result => {\n      if (result.data.status == \"success\") {\n        Alert.success(result.data.message, {\n          position: 'bottom-right',\n          timeout: 1000\n        });\n        var reviewArea = document.getElementById(\"wReview\" + param);\n        reviewArea.style.display = \"none\";\n      } else {\n        Alert.error(result.data.message, {\n          position: 'bottom-right',\n          timeout: 1000\n        });\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, this.state.orderItemList.length > 0, this.state.orderItemList.map((item, index) => React.createElement(\"div\", {\n      class: \"orderTable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"table-responsive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: Environment.weburl + '/product/details/' + item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: Environment.apiurl + '/products/' + item.image,\n      class: \"img-fluid\",\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }))), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, item.product_name)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"$\", item.amount.toFixed(2)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Arriving Soon \", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, dateFormat(item.addedOn, \"mmmm dS' yy\"))), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      \"data-toggle\": \"collapse\",\n      \"data-target\": \"#wReview\" + item.itemId,\n      onClick: e => this.GetDetails(item.itemId, item.id),\n      class: \"writeReview\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Write a review\"))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      colspan: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"wReview\" + item.itemId,\n      class: \"collapse reviewToggle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"reviewIn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Overall Rating\"), React.createElement(\"div\", {\n      class: \"starrating risingstar d-flex text-left flex-row-reverse\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"star5_\" + item.itemId,\n      name: \"rating\" + item.itemId,\n      value: \"5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"star5_\" + item.itemId,\n      title: \"5 star\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"star4_\" + item.itemId,\n      name: \"rating\" + item.itemId,\n      value: \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"star4_\" + item.itemId,\n      title: \"4 star\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"star3_\" + item.itemId,\n      name: \"rating\" + item.itemId,\n      value: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"star3_\" + item.itemId,\n      title: \"3 star\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"star2_\" + item.itemId,\n      name: \"rating\" + item.itemId,\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"star2_\" + item.itemId,\n      title: \"2 star\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"star1_\" + item.itemId,\n      name: \"rating\" + item.itemId,\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"star1_\" + item.itemId,\n      title: \"1 star\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Write your review\"), React.createElement(\"textarea\", {\n      placeholder: \"Write your review\",\n      required: \"required\",\n      name: \"review\",\n      id: \"review\" + item.itemId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"button\",\n      onClick: e => this.submitReview(item.itemId, item.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Submit\"))))))))));\n  }\n\n}\n\nexport default OrderItem;","map":{"version":3,"sources":["/var/www/html/htdoc/detailgarage/frontend/src/components/user/order_item.js"],"names":["React","Component","Environment","axios","If","Then","Else","Switch","Case","Header","Alert","Footer","UserLeftMenu","dateFormat","require","OrderItem","constructor","props","state","user_id_send","orderItemList","orderId","rating","reviewedit","postdata","localStorage","getItem","addRating","bind","GetDetails","post","apiurl","user_id","then","result","setState","data","response","param","param1","undefined","productid","console","log","resuldata","length","document","getElementById","checked","value","review","id","alert","submitReview","prorating","proratingObj","querySelector","proReview","proId","reviewDetails","status","success","message","position","timeout","reviewArea","style","display","error","render","map","item","index","weburl","image","product_name","amount","toFixed","addedOn","itemId","e"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Environment } from '../../../src/components/environment';\nimport axios from 'axios';\nimport { If, Then, Else, Switch, Case} from 'react-if';\nimport Header from '../../../src/layouts/header';\nimport Alert from 'react-s-alert';\nimport Footer from '../../../src/layouts/footer';\nimport UserLeftMenu from '../../../src/layouts/user_left_menu';\n// import UserReview from '../../components/user/user_review';\nvar dateFormat = require('dateformat');\n\nclass OrderItem extends Component{\n    constructor (props) {\n        super(props);\n        this.state = {\n            user_id_send :'',\n            orderItemList: [],\n            orderId:'',\n            rating : 0,\n            reviewedit:\"\"\n            \n            // reviewlist:[],\n            // itemlist:[],\n\n        }\n        const orderId=this.props.postdata;\n        var user_id_send = localStorage.getItem(\"user_id\")?localStorage.getItem(\"user_id\"):\"\";\n        this.addRating = this.addRating.bind(this);\n        this.GetDetails=this.GetDetails.bind(this);\n\n        axios.post(Environment.apiurl+'/getUserOrderItemList', {orderId:orderId, user_id:user_id_send})\n        .then(result => {\n            \n            if(result){\n                this.setState({user_id_send:user_id_send});\n                this.setState({orderItemList: result.data.response});\n                // this.setState({reviewlist: result.data.response.reviewlist});\n            }\n        });\n\n    }\n    GetDetails(param, param1){\n\t\tthis.setState({reviewedit:\"\" });\n\t\t var user_id_send = localStorage.getItem(\"user_id\")?localStorage.getItem(\"user_id\"):\"\";\n\t\tif(param!=undefined && param1!=undefined){\n\t\t\taxios.post(Environment.apiurl+'/getReviewdetailByid', {productid:param1, user_id:user_id_send})\n        .then(result => {\n            console.log(result.data);\n            if(result){\n                 var resuldata=result.data.response;\n                 if(resuldata.length>0){\n\t\t\t\t\t var rating=resuldata[0].rating;\n\t\t\t\t\t \n\t\t\t\t\t document.getElementById(\"star\"+rating+\"_\"+param).checked = true;\n\t\t\t\t\t document.getElementById('review'+param).value=resuldata[0].review;\n\t\t\t\t\t  this.setState({reviewedit:resuldata[0].id });\n\t\t\t\t }\n            }\n        });\n\t\t\t\n\t\t\t\n\t\t}\n\t}\n\n    addRating(param, param1){\n        alert(param);\n        alert(param1)\n        this.setState({ rating: param1 });\n        \n    }\n\n\n    submitReview(param, param1){\n\t\t\n        //var prorating = document.querySelector('input[name = rating'+param+']:checked').value;\n        //alert(prorating);\n        var prorating = 0;\n        var proratingObj = document.querySelector('input[name = rating'+param+']:checked');\n        if(proratingObj) { \n            prorating = proratingObj.value;\n        }\n        var proReview = document.getElementById('review'+param).value;\n        var proId = param1;\n\n        var reviewDetails =\n        {\n\t\t\t\"reviewedit\":this.state.reviewedit,\n            \"rating\":prorating,\n            \"review\":proReview,\n            \"product_id\":proId,\n            \"user_id\":this.state.user_id_send,\n        };\n        axios.post(Environment.apiurl+\"/addProductReview\", reviewDetails).then(result => {\n            if(result.data.status==\"success\"){\n                Alert.success(result.data.message, {\n                    position: 'bottom-right',\n                    timeout: 1000\n                });\n                var reviewArea = document.getElementById(\"wReview\"+param);\n                reviewArea.style.display = \"none\";\n            } else {\n                Alert.error(result.data.message, {\n                    position: 'bottom-right',\n                    timeout: 1000\n                });\n            }\n        });\n    }\n\n    render() {\n        return (\n            <div>\n                {this.state.orderItemList.length>0}\n                {this.state.orderItemList.map( (item, index) =>\n                <div class=\"orderTable\">\n                    <div class=\"table-responsive\">\n                        <table>\n                        <tr>\n                            <td><a href={Environment.weburl+'/product/details/'+item.id}><img src={Environment.apiurl+'/products/'+item.image} class=\"img-fluid\" alt=\"\" /></a></td>\n                            <td><a href=\"\">{item.product_name}</a></td>\n                            <td>${item.amount.toFixed(2)}</td>\n                            <td>Arriving Soon <span>{dateFormat(item.addedOn, \"mmmm dS' yy\")}</span></td>\n                            <td><a data-toggle=\"collapse\" data-target={\"#wReview\"+item.itemId}  onClick={e => this.GetDetails(item.itemId, item.id) }  class=\"writeReview\">Write a review</a></td>\n                        </tr>\n\n                        <tr>\n                            <td colspan=\"5\"><div id={\"wReview\"+item.itemId} class=\"collapse reviewToggle\">\n                                <div class=\"reviewIn\">\n\n                                    {/* <UserReview postdata={(item.itemId, item.id)}/> */}\n                                    <div class=\"form-group\">\n                                        <h4>Overall Rating</h4>\n                                        <div class=\"starrating risingstar d-flex text-left flex-row-reverse\">\n                                            <input type=\"radio\" id={\"star5_\"+item.itemId} name={\"rating\"+item.itemId} value=\"5\" />\n                                            <label for={\"star5_\"+item.itemId} title=\"5 star\"></label>\n                                            <input type=\"radio\" id={\"star4_\"+item.itemId} name={\"rating\"+item.itemId} value=\"4\" />\n                                            <label for={\"star4_\"+item.itemId} title=\"4 star\"></label>\n                                            <input type=\"radio\" id={\"star3_\"+item.itemId} name={\"rating\"+item.itemId} value=\"3\" />\n                                            <label for={\"star3_\"+item.itemId} title=\"3 star\"></label>\n                                            <input type=\"radio\" id={\"star2_\"+item.itemId} name={\"rating\"+item.itemId} value=\"2\" />\n                                            <label for={\"star2_\"+item.itemId} title=\"2 star\"></label>\n                                            <input type=\"radio\" id={\"star1_\"+item.itemId} name={\"rating\"+item.itemId} value=\"1\" />\n                                            <label for={\"star1_\"+item.itemId} title=\"1 star\"></label>\n                                        </div>\n                                    </div>\n                                    <div class=\"form-group\">\n                                        <h4>Write your review</h4>\n                                        <textarea placeholder=\"Write your review\" required = \"required\" name=\"review\" id={\"review\"+item.itemId}></textarea>\n                                    </div>\n                                    <button type=\"button\" onClick={(e) => this.submitReview(item.itemId, item.id)}>Submit</button>\n                                    </div>\n\n                                </div>\n                            </td>\n                        </tr>\n                        </table>\n                    </div>\n                </div>\n                )}\n            </div>\n        )\n    }    \n\n}\n\nexport default OrderItem;\n"]},"metadata":{},"sourceType":"module"}